{% extends 'layout/base.html' %}

{% block title %}Chi Tiết Lịch Sử Khám Bệnh{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm border-0">
        <div class="card-header bg-dark text-white">
            <h4 class="mb-0"><i class="bi bi-file-earmark-medical"></i> Chi Tiết Khám Bệnh</h4>
        </div>
        <div class="card-body">
            <h5 class="fw-bold">Thông Tin Khám</h5>
            <p>Ngày Khám: {{ medical_details.create_date.strftime('%d/%m/%Y') }}</p>
            <p>Mã phiếu khám: <strong>{{ medical_details.id }}</strong></p>
            <p>Chuẩn Đoán: <strong>{{ medical_details.diagnose }}</strong></p>
            <p>Triệu Chứng: {{ medical_details.symptoms }}</p>
            <p>Bác Sĩ:
                {% for d in user %}
                {% if d.id == medical_details.doctor_id %}
                <strong>{{ d.name }}</strong>
                {% endif %}
                {% endfor %}
            </p>

            <h5 class="fw-bold mt-4">Đơn Thuốc</h5>
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Tên Thuốc</th>
                    <th>Số Lượng</th>
                    <th>Mô Tả</th>
                </tr>
                </thead>
                <tbody>
                {% for detail in drug_details %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ drugs[detail.drug].name }}</td>
                    <td>{{ detail.quantity }}</td>
                    <td>{{ detail.description }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
